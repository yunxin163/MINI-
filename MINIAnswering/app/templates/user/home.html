<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="utf-8">
	<title>{{title}}</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
	<link rel="shortcut icon" href="/static/img/favicon.ico"/>
	<link href="/static/css/global.css" rel="stylesheet" />
	<link href="/static/css/user.css" rel="stylesheet" />
    <!-- <link href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700&amp;lang=en" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Roboto+Slab:300,400,500&amp;lang=en" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Product+Sans:400&amp;lang=en" rel="stylesheet"> -->

    <link rel="stylesheet" href="/static/css/quill.snow.css" />
	<link rel="stylesheet" href="/static/css/katex.min.css" />
	<link rel="stylesheet" href="/static/css/monokai-sublime.min.css" />

	<script src="/static/js/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
	<script src="/static/js/jquery.cookie.min.js"></script>
	<script>
	paceOptions = {
	  	ajax: true
	};
	</script>
	<script src="/static/js/pace.js"></script>
	<script src="/static/js/global.js"></script>
	<script src="/static/js/user.js"></script>
    <link href="/static/css/user-green-theme.css" rel="stylesheet" />

    <!-- 网易云信 IM SDK -->
    <script src="/static/js/sdk/NIM_Web_NIM_v6.5.0.js"></script>
    <!-- <script src="/static/js/sdk/NIM_Web_Chatroom_v6.5.0.js"></script>
    <script src="/static/js/sdk/NIM_Web_WebRTC_v6.5.0.js"></script>
    <script src="/static/js/sdk/NIM_Web_WhiteBoard_v6.5.0.js"></script> -->

    <!-- <script>NIM.use(WhiteBoard);</script> -->
    <script src="/static/js/nim.js"></script>

{% autoescape false %}
{{meta_data}}
{% endautoescape %}
	<script>
	var localStorage = window.localStorage,
		userCenter = new router({
			initIndex: 3,
			events: {
				s0: function() {
					// PAGE: 推荐
					app.getLatestQuestion();
				},
				s1: function() {
					// PAGE: 推荐
					app.getFollowedQuestion();
				},
			},
		}),
		user_information = user_information || {};
	</script>
<style>
.tab-view .tab-btn {
	background: none;
	height: 50px;
	border:none; 
	cursor: pointer; 
	font-size: 23px;
	margin-top: 30px;
	color: white;
	margin-left: 20px;
	padding-bottom: 10px;
}
.tab-view .tab-btn:first-child {
	margin-left: 0;
}
.tab-view header {
	background: none;
	margin-bottom: 20px;
}
.tab-view header .active {
	border-bottom: 1px solid;
}
</style>
</head>
<body onload="userCenter.onload();">
<div id="msg_container"></div>
<div id="popup_container"></div>
<header class="header" role="banner" id="header">
    <div class="header-container">
        <svg id="menu_button" class="menu_button" width="24px" height="24px" viewBox="0 0 48 48">
            <path d="M6 36h36v-4H6v4zm0-10h36v-4H6v4zm0-14v4h36v-4H6z"></path>
        </svg>
        <h1 class="product-logo">
        	<img src="/static/img/favicon.png" id="user-logo-img">
        	<span id="user-logo-text">Mini 答疑</span>
        </h1>
        <div class="user-info">
        	<div class="user-name">{{user.username}}</div>
            <img src="{{user.avatar_uri}}" height="25" width="25" class="user-avatar">
        </div>
    </div>
</header>
	<div id="main" class="main" role="main">
	    <div class="left-row" id="left-row">
	        <div id="left-row-1">
	            <div class="ul" for="0">
	                <div class="a1">
	                    <svg x="0px" y="0px" width="20px" height="20px" viewBox="0 0 20 20" focusable="false" fill="#000000">
	                        <polygon points="8,5 13,10 8,15"></polygon>
	                    </svg>
	                </div>
	                <div class="ul-svg-ico">
	                    <svg class="a-nEbBXb-c a-s-fa-Ha-pa" width="24px" height="24px" viewBox="0 0 24 24" fill="#000000" focusable="false" x="0px" y="0px">
	                        <path d="M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z"></path>
	                    </svg>
	                </div>
	                <div class="a2"><a>推&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;荐</a>
	                </div>
	            </div>
	            <div class="ul" for="1">
	                <div class="a1">
	                    <svg x="0px" y="0px" width="20px" height="20px" viewBox="0 0 20 20" focusable="false" fill="#000000"\>
	                        <polygon points="8,5 13,10 8,15"></polygon>
	                    </svg>
	                </div>
	                <div class="ul-svg-ico">
	                    <svg class="" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" focusable="false" fill="#4285f4">
	                        <path d="M0 0h24v24H0z" fill="none"></path>
	                        <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path>
	                        <path d="M0 0h24v24H0z" fill="none"></path>
	                    </svg>
	                </div>
	                <div class="a2"><a>关&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;注</a>
	                </div>
	            </div>
	            <div class="line"></div>
	            <div class="ul" for="2">
	                <div class="a1">
	                    <svg x="0px" y="0px" width="20px" height="20px" viewBox="0 0 20 20" focusable="false" >
	                        <polygon points="8,5 13,10 8,15"></polygon>
	                    </svg>
	                </div>
	                <div class="ul-svg-ico">
	                    <svg class="" x="0px" y="0px" width="24px" height="24px" viewBox="0 0 24 24" focusable="false" fill="#4285f4">
	                        <path d="M0 0h24v24H0z" fill="none"></path>
	                        <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"></path>
	                        <path d="M0 0h24v24H0z" fill="none"></path>
	                    </svg>
	                </div>
	                <div class="a2"><a>我的积分</a>
	                </div>
	            </div>
	            <div class="line"></div>
	            <div class="dom-tip">高 级</div>
	            <div class="ul" for="3">
	                <div class="a1">
	                    <svg x="0px" y="0px" width="20px" height="20px" viewBox="0 0 20 20" focusable="false" fill="#000000">
	                        <polygon points="8,5 13,10 8,15"></polygon>
	                    </svg>
	                </div>
	                <div class="ul-svg-ico" style="padding-right: 22px">
	                    <svg width="24px" height="24px" class="side_nav_icon" viewBox="0 0 24 24">
	                        <path d="M19.4,13c0-0.3,0.1-0.6,0.1-1s0-0.7-0.1-1l2.1-1.7c0.2-0.2,0.2-0.4,0.1-0.6l-2-3.5C19.5,5.1,19.3,5,19,5.1l-2.5,1 c-0.5-0.4-1.1-0.7-1.7-1l-0.4-2.6C14.5,2.2,14.2,2,14,2h-4C9.8,2,9.5,2.2,9.5,2.4L9.1,5.1C8.5,5.3,8,5.7,7.4,6.1L5,5.1 C4.7,5,4.5,5.1,4.3,5.3l-2,3.5C2.2,8.9,2.3,9.2,2.5,9.4L4.6,11c0,0.3-0.1,0.6-0.1,1s0,0.7,0.1,1l-2.1,1.7 c-0.2,0.2-0.2,0.4-0.1,0.6l2,3.5C4.5,18.9,4.7,19,5,18.9l2.5-1c0.5,0.4,1.1,0.7,1.7,1l0.4,2.6c0,0.2,0.2,0.4,0.5,0.4h4 c0.2,0,0.5-0.2,0.5-0.4l0.4-2.6c0.6-0.3,1.2-0.6,1.7-1l2.5,1c0.2,0.1,0.5,0,0.6-0.2l2-3.5c0.1-0.2,0.1-0.5-0.1-0.6L19.4,13z M12,15.5c-1.9,0-3.5-1.6-3.5-3.5s1.6-3.5,3.5-3.5s3.5,1.6,3.5,3.5S13.9,15.5,12,15.5z"></path>
	                    </svg>
	                </div>
	                <div class="a2"><a>账户设置</a>
	                </div>
	            </div>
	            <div class="ul" for="4">
	                <div class="a1">
	                    <svg x="0px" y="0px" width="20px" height="20px" viewBox="0 0 20 20" focusable="false" fill="#000000">
	                        <polygon points="8,5 13,10 8,15"></polygon>
	                    </svg>
	                </div>
	                <div class="ul-svg-ico">
	                    <svg width="24px" height="24px" class="side_nav_icon" viewBox="0 0 24 24">
	                        <path d="M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-7 12h-2v-2h2v2zm0-4h-2V6h2v4z"></path>
	                    </svg>
	                </div>
	                <div class="a2"><a>反&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;馈</a>
	                </div>
	            </div>
	            <div class="ul" for="5">
	                <div class="a1">
	                    <svg x="0px" y="0px" width="20px" height="20px" viewBox="0 0 20 20" focusable="false" fill="#000000">
	                        <polygon points="8,5 13,10 8,15"></polygon>
	                    </svg>
	                </div>
	                <div class="ul-svg-ico">
	                    <svg width="24px" height="24px" class="side_nav_icon" viewBox="0 0 24 24">
	                        <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"></path>
	                    </svg>
	                </div>
	                <div class="a2"><a>帮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;助</a>
	                </div>
	            </div>
	        </div>
	    </div>
	    <div class="right-row" id="right-row">
	        <div id="showcase" class="showcase">
	        	<section sectionID="0" id="user_recommendation">

	        		<div class="sub-title">最新发布</div>
	        		<div class="card-list" id="latest_question_list">
	        			<template v-for="latest_question in latest_question_data">
	        				<a :href='"/question/"+latest_question.id+"/"'>
	        					<div class="card pointer">
			        				<div class="left">
			        					<img :src=latest_question.publisher.avatar_uri height="40" class="user-avatar">
			        				</div>
			        				<div class="right">
			        					<div class="subtitle">{[ latest_question.status? '已解决' : '未解决' ]}</div>
			        					<div class="title">
			        						<span>{[ latest_question.title ]}</span>
			        					</div>
			        					<div class="subtitle">
			        						{[ latest_question.content_summary ]}
			        					</div>
			        				</div>
				        		</div>
			        		</a>
			        	</template>
	        		</div>

	        		<a href="../question/ask/" title="发布问题"><button class="float" type="button">发布问题</button></a>

	        	</section>
	        	<section sectionID="1" id="user_information_section">
	        		
	        		<div class="sub-title">关注的问题</div>
	        		<div class="card-list" id="followed_question_list">
	        			<template v-for="followed_question in followed_question_data">
	        				<a :href='"/question/"+followed_question.id+"/"'>
	        					<div class="card pointer">
			        				<div class="left">
			        					<img :src=followed_question.publisher.avatar_uri height="40" class="user-avatar">
			        				</div>
			        				<div class="right">
			        					<div class="subtitle">{[ followed_question.status? '已解决' : '未解决' ]}</div>
			        					<div class="title">
			        						<span>{[ followed_question.title ]}</span>
			        					</div>
			        					<div class="subtitle">
			        						{[ followed_question.content_summary ]}
			        					</div>
			        				</div>
				        		</div>
			        		</a>
			        	</template>
	        		</div>

	        	</section>

	        	<section sectionID="2" id="user_point_section">

	        		<div class="sub-title" style="padding-left: 0;">我的积分</div>

					<div style="padding: 25px;border-radius: 16px; background-color: rgba(0, 0, 0, .06);margin-top: 20px;margin-right: 20px">
						<img src="/static/img/points.svg" height="75" width="75">
						<div style="margin-left: 95px; margin-top: -65px; font-weight: 600; color: #fff">
							<div style="font-size: 24px;">666</div>
							<div style="font-size: 14px; margin-top: 5px; opacity: .68">当前积分余额</div>
						</div>
					</div>

					<div class="sub-title" style="padding-left: 0;margin-top: 30px">积分纪录</div>

	        		<div id="point_record1" class="point_record_list_in">
	        			<div class="point_record_list_in_item" style="background-color: #e7e7e7; width:80%; margin-top: 20px; padding: 15px;border-radius: 7px;">
	        					<div style="float: left;margin-left: 20px;">日期</div>
	        					<div style="float: left;margin-left: 200px;">积分</div>
	        					<div style="float: left;margin-left: 200px;">信息</div>
	        					<div style="clear: both;"></div>
	        			</div>
	        			<div class="point_record_list_in_item" style="background-color: white; width:80%;padding: 15px;border-radius: 7px;">
	        					<div style="float: left;">2019-5-26 13:18</div>
	        					<div style="float: left;margin-left: 140px;margin-right: 180px">6分</div>
	        					<div style="float: left;">Mark向你转入6积分</div>
	        					<div style="clear: both;"></div>
	        			</div>
	        			<div class="point_record_list_in_item" style="background-color: #e7e7e7; width:80%;padding: 15px;border-radius: 7px;">
	        					<div style="float: left;">2019-5-25 09:53</div>
	        					<div style="float: left;margin-left: 140px;margin-right: 180px">2分</div>
	        					<div style="float: left;">Mark向你转入2积分</div>
	        					<div style="clear: both;"></div>
	        			</div>
	        		</div> 
	        		<div id="point_record2" class="point_record_list_out" style="display: none;">
	        			<div class="point_record_list_out_item" style="background-color: #e7e7e7; width:80%; margin-top: 20px; padding: 15px;border-radius: 7px;">
	        					<div style="float: left;margin-left: 20px;">日期</div>
	        					<div style="float: left;margin-left: 200px;">积分</div>
	        					<div style="float: left;margin-left: 200px;">信息</div>
	        					<div style="clear: both;"></div>
	        			</div>
	        			<div class="point_record_list_out_item" style="background-color: white; width:80%;padding: 15px;border-radius: 7px;">
	        					<div style="float: left;">2019-5-26 13:18</div>
	        					<div style="float: left;margin-left: 140px;margin-right: 180px">6分</div>
	        					<div style="float: left;">你向Mark转出6积分</div>
	        					<div style="clear: both;"></div>
	        			</div>
	        			<div class="point_record_list_out_item" style="background-color: #e7e7e7; width:80%;padding: 15px;border-radius: 7px;">
	        					<div style="float: left;">2019-5-25 09:53</div>
	        					<div style="float: left;margin-left: 140px;margin-right: 180px">2分</div>
	        					<div style="float: left;">你向Mark转出2积分</div>
	        					<div style="clear: both;"></div>
	        			</div>
	        		</div> 
	        		

	        	</section>


	        	<section sectionID="3" id="user_settings">
	        		
	        		<div class="sub-title">账户设置</div>
	        		<form class="form-table" id="user_settings_form">
	        			<li>
	        				<label>I D</label>
	        				<input type="text" name="id" autocomplete="off" disabled="disabled" v-model="user_information.id" />
	        			</li>
	        			<li>
	        				<label>用户名</label>
	        				<input type="text" name="username" autocomplete="off" v-model="user_information.username" />
	        			</li>
	        			<li>
	        				<label>电子邮箱</label>
	        				<input type="email" name="email" autocomplete="off" v-model="user_information.email" />
	        			</li>
	        			<li>
	        				<label>性 别</label>
	        				<select name="gender" style="width: 95%" v-model="user_information.gender">
								<option value="0">男</option>
								<option value="1">女</option>
								<option value="2">其他</option>
							</select>
	        			</li>
	        		</form>
	        		<div style="padding: 0 16px; text-align: right">
						<button class="submit-btn bright" @click="modifyInformation()">保存设置</button>
					</div>


	        	</section>

	        	<section sectionID="4" id="user_biometric_section">
	        		<div class="sub-title">我要反馈</div>
	        		<!-- <a href="/account/camera" target="_blank">
	        			<button class="float" type="button" id="new_biometric_btn">添加面容</button>
	        		</a> -->
	        		<div class="feedback" style=" ">
	        		<div id="feedback-intro-header" class="feedback-intro" style="color: #fff;text-align: center;">
	        			<h1>欢迎给我们反馈</h1>
	        			<h2>Feedback is welcome</h2>
	        		</div>
	       			<div id="ask-container" class="white-center-box main-box">
	       				<div class="row">
                    		<div class="feedback-info" style="text-align: center;padding: 10px 20px;">
                        		<label for="feedback-content" style="text-align: center;">反馈内容</label>
                    		</div>
                    		<div class="col-85">
                        	<!-- Rich-text Editor Begin -->
                        		<div id="standalone-container" class="richtext-area">
                            		<div id="toolbar-container">
                                		<span class="ql-formats">
                                    	<select class="ql-font"></select>
                                    	<select class="ql-size"></select>
                               		 	</span>
                                		<span class="ql-formats">
                                    		<button class="ql-bold"></button>
                                    		<button class="ql-italic"></button>
                                    		<button class="ql-underline"></button>
                                    		<button class="ql-strike"></button>
                               			</span>
                                		<span class="ql-formats">
                                    		<select class="ql-color"></select>
                                    		<select class="ql-background"></select>
                                		</span>
                                		<span class="ql-formats">
                                    		<button class="ql-script" value="sub"></button>
                                    		<button class="ql-script" value="super"></button>
                                		</span>
                                		<span class="ql-formats">
                                    		<button class="ql-header" value="1"></button>
                                    		<button class="ql-header" value="2"></button>
                                    		<button class="ql-blockquote"></button>
                                    		<button class="ql-code-block"></button>
                                		</span>
                                		<span class="ql-formats">
                                    		<button class="ql-list" value="ordered"></button>
                                    		<button class="ql-list" value="bullet"></button>
                                    		<button class="ql-indent" value="-1"></button>
                                    		<button class="ql-indent" value="+1"></button>
                                		</span>
                                		<span class="ql-formats">
                                    		<button class="ql-direction" value="rtl"></button>
                                    		<select class="ql-align"></select>
                                		</span>
                                		<span class="ql-formats">
                                    		<button class="ql-link"></button>
                                    		<button class="ql-image"></button>
                                    		<button class="ql-video"></button>
                                    		<button class="ql-formula"></button>
                                		</span>
                                		<span class="ql-formats">
                                    		<button class="ql-clean"></button>
                                		</span>
                            		</div>
                            		<div id="editor-container"></div>
                        		</div>
                        	<!-- Rich-text Editor End -->
                    		</div>
                		</div>
                		<div class="row" style="text-align: center;margin:50px;">
                    		<div id="ask-error" class="error-box" style="display: none"></div>
                   		 	<button class="submit-btn" type="button" id="send-btn" style="height: 50px;">发送反馈</button>
                		</div>
	       			</div>
	       			</div>
	        	</section>






	        	<section sectionID="5" id="user_credential_section">
	        		<div class="sub-title">我的证件</div>
	        		<button class="float" type="button" id="new_credential_btn" @click="renderPageByURL('/user/credential/new', 'GET');">添加证件</button>
	        	</section>
	        	<section sectionID="-1" id="ajax_page"></section>
	        </div>
	    </div>
	</div>
	<script>
	$(document).ready(function() {
		$("#user_point_button1").on('click', function(){
			$("#user_point_button1").css({'border-bottom':'1px solid'});
			$("#user_point_button2").css({'border-bottom':'none'});
			$("#point_record1").show();
			$("#point_record2").hide();
		});
		$("#user_point_button2").on('click', function(){
			$("#user_point_button2").css({'border-bottom':'1px solid'});
			$("#user_point_button1").css({'border-bottom':'none'});
			$("#point_record2").show();
			$("#point_record1").hide();
		});
	});
	</script>
	
	<script src="/static/js/katex.min.js"></script>
	<script src="/static/js/highlight.min.js"></script>
	<script src="/static/js/quill.min.js"></script>
	<script>
	var quill = new Quill('#editor-container', {
	    modules: {
	        formula: true,
	        syntax: true,
	        toolbar: '#toolbar-container'
	    },
	    placeholder: '',
	    theme: 'snow',
	});
	</script>
	
	<script>
	Vue.config.delimiters = ['{[', ']}'];
	var app = new Vue({
		el: '#showcase',
		delimiters: ['{[', ']}'],
		data: {
			latest_question_data: [],
			followed_question_data: [],
			user_information: user_information,
		},
		methods: {
			renderPageByURL: userCenter.renderPageByURL,
			timestampFormat: timestampFormat,
			dateFormat1(timestamp){
				function add0(m){
					return (m < 10)? '0' + m : m;
				}
				var time = new Date(timestamp),
					y = time.getFullYear(),
					m = time.getMonth() + 1,
					d = time.getDate(),
					h = time.getHours(),
					mm = time.getMinutes(),
					s = time.getSeconds();
				return y+' 年 '+add0(m)+' 月 '+add0(d)+' 日';
			},
			getLatestQuestion() {
				$.post('/question/api/latest/', {page: 1}, function(d) {
					if (d.states != 200) {
						serCenter.pushMsg('无法获取热门问题', 'alert');
						return;
					}
					app.latest_question_data = [];
					for (i = 0; i < d.data.length; i++) {
						app.latest_question_data.push(d.data[i]);
					}
				});
			},
			getFollowedQuestion() {
				$.post('/question/api/followed/', {page: 1}, function(d) {
					if (d.states != 200) {
						serCenter.pushMsg('无法获取关注问题', 'alert');
						return;
					}
					app.followed_question_data = [];
					for (i = 0; i < d.data.length; i++) {
						app.followed_question_data.push(d.data[i]);
					}
				});
			},
			modifyInformation() {
				$.post('/user/api/modify/', {
					username: this.user_information.username,
					email: this.user_information.email,
					gender: this.user_information.gender,
				}, function(d) {
					if (d.states != 200) {
						serCenter.pushMsg('无法更新信息', 'alert');
						return;
					} else {
						userCenter.pushMsg('保存成功', 'success');
					}
				});
			},
		},
	});
	</script>
	<script>
	// nim init
	var nim = NIM.getInstance({
	    // 初始化SDK
	    debug: true,
	    appKey: '1ee5a51b7d008254cd73b1d4369a9494',
	    account: $.cookie('nim_uid'),
	    token: $.cookie('nim_token'),
	    customTag: 'USER',
	    onconnect: onConnect,
	    onerror: onError,
	    onwillreconnect: onWillReconnect,
	    ondisconnect: onDisconnect,
	    // 多端登录
	    onloginportschange: onLoginPortsChange,
	    // 用户关系
	    onblacklist: onBlacklist,
	    onsyncmarkinblacklist: onMarkInBlacklist,
	    onmutelist: onMutelist,
	    onsyncmarkinmutelist: onMarkInMutelist,
	    // 好友关系
	    onfriends: onFriends,
	    onsyncfriendaction: onSyncFriendAction,
	    // 用户名片
	    onmyinfo: onMyInfo,
	    onupdatemyinfo: onUpdateMyInfo,
	    onusers: onUsers,
	    onupdateuser: onUpdateUser,
	    // 机器人列表的回调
	    onrobots: onRobots,
	    // 群组
	    onteams: onTeams,
	    onsynccreateteam: onCreateTeam,
	    onUpdateTeam: onUpdateTeam,
	    onteammembers: onTeamMembers,
	    // onsyncteammembersdone: onSyncTeamMembersDone,
	    onupdateteammember: onUpdateTeamMember,
	    // 群消息业务已读通知
	    onTeamMsgReceipt: onTeamMsgReceipt,
	    // 会话
	    onsessions: onSessions,
	    onupdatesession: onUpdateSession,
	    // 消息
	    onroamingmsgs: onRoamingMsgs,
	    onofflinemsgs: onOfflineMsgs,
	    onmsg: onMsg,
	    // 系统通知
	    onofflinesysmsgs: onOfflineSysMsgs,
	    onsysmsg: onSysMsg,
	    onupdatesysmsg: onUpdateSysMsg,
	    onsysmsgunread: onSysMsgUnread,
	    onupdatesysmsgunread: onUpdateSysMsgUnread,
	    onofflinecustomsysmsgs: onOfflineCustomSysMsgs,
	    oncustomsysmsg: onCustomSysMsg,
	    // 收到广播消息
	    onbroadcastmsg: onBroadcastMsg,
	    onbroadcastmsgs: onBroadcastMsgs,
	    // 同步完成
	    onsyncdone: onSyncDone
	});

	// // Init Whiteboard
 //    whiteboard = WhiteBoard.getInstance({
 //        nim: nim,
 //        debug: true,
 //    });

	// // Set account state
	// // 是否被叫中
	// let beCalling = false
	// // 呼叫类型
	// let type = null
	// // 被叫信息
	// let beCalledInfo = null
	// // 是否正忙
	// let busy = false

	// const sessionConfig = {
 //    	record: false
	// }

	// // 开启监听
	// whiteboard.on('beCalling', function(obj) {
	//   console.log('on beCalling', obj)
	//   const channelId = obj.channelId
	//   // 被叫回应主叫自己已经收到了通话请求
	//   whiteboard.control({
	//     channelId,
	//     command: WebRTC.NETCALL_CONTROL_COMMAND_START_NOTIFY_RECEIVED
	//   })
	//   type = obj.type;
 //      beCalledInfo = obj;
	//   // 只有在没有通话并且没有被叫的时候才记录被叫信息, 否则通知对方忙并拒绝通话
	//   if (!whiteboard.calling && !beCalling) {

	//   	console.log('接到通话请求');

	//   	beCalling = true;

	//     var callingResponse = confirm(`是否接听 ${beCalledInfo.account} 发起的白板通话 ？`);

	//     if (callingResponse) {
	//     	window.location.href = `/question/${beCalledInfo.custom}/whiteboard/`;
	//      	// whiteboard.response({
	// 		//   accepted: true,
	// 		//   beCalledInfo: beCalledInfo,
	// 		//   sessionConfig: sessionConfig
	// 		// }).catch(function(err) {
	// 		//   console.log('接听失败', err)
	// 		// })
	//     }

	//   } else {
	//     if (whiteboard.calling) {
	//       busy = whiteboard.notCurrentChannelId(obj)
	//     } else if (beCalling) {
	//       busy = beCalledInfo.channelId !== channelId
	//     }
	//     if (busy) {
	//       whiteboard.control({
	//         channelId,
	//         command: WebRTC.NETCALL_CONTROL_COMMAND_BUSY
	//       })
	//       // 拒绝通话
	//       whiteboard.response({
	//         accepted: false,
	//         beCalledInfo: obj
	//       })
	//     }
	//   }
	// })
	</script>


</body>
</html>